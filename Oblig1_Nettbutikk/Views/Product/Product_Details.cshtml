@model Oblig1_Nettbutikk.Models.Product

<div class="product_details">
    <div class="row"><h1>@Model.Name</h1></div>
    <div class="row">
        <div class="col-md-8">
            <div class="details_image">
                <img src="@Model.ImageUrl" />
            </div>
        </div>
        <div class="col-md-4">
            <section>
                <div class="details_price">
                    <div class="row">

                        <span class="price">@Model.Price ,- NOK</span>
                    </div>
                    <div class="row">
                        <div class="col-md-2"></div>
                        <div class="col-md-8">

                            <a class="btn btn-success addToCart" id="@Model.ProductID">Legg i handlekurv</a>
                        </div>
                        <div class="col-md-2"></div>
                    </div>

                </div>
            </section>
            <section>
                <div class="details_var_info">
                    <div class="row">
                        <div class="col-md-6">Antall på lager</div>
                        <div class="col-md-6">@Model.Stock</div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">Produktnummer</div>
                        <div class="col-md-6">@Model.ProductID</div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">Kategori</div>
                        <div class="col-md-6">@Model.CategoryID</div>
                    </div>
                </div>
            </section>
            <section>
                <div class="details_description">

                    <div class="row">
                        <span>
                            @Model.Description
                        </span>

                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("img").on("error", function () {
            $(this).hide();
        })

        $(".product_details a").unbind("click");
        $(".product_details a.addToCart").click(function () {
            //alert("TODO: legg " + $(this).attr("data-productName") + " i shoppingcart (Product_ListItem.cshtml)")
            $.ajax({
                url: '@Url.Action("AddToCart","Home")',
                data: {
                    ProductId:$(this).attr("id")
                },
                method: "POST",
                success: function (result) {
                    count = parseInt(result);
                    $(".cartCounter").text(count);
                }, error: function (result) {
                    //window.location.href = result;
                    alert(JSON.stringify(result));
                }

            })
        })
    })
</script>